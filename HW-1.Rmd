---
title: "MATH 216 Homework 1"
author: "Kyra Gray"
output:
  html_document:
    toc: true
    toc_float: true
    collapsed: false
    smooth_scroll: false
---

```{r, echo=FALSE, message=FALSE}
library(ggplot2)
library(dplyr)
# For read_csv() command, which is an improved version of base R's read.csv()
library(readr) 

# Load data sets. Note this assumes this .Rmd files is in the same directory as
# the .csv files.
flights <- read_csv("data/flights.csv") %>% 
  mutate(date=as.Date(date))
weather <- read_csv("data/weather.csv") %>% 
  mutate(date=as.Date(date))
planes <- read_csv("data/planes.csv")
airports <- read_csv("data/airports.csv")
states <- read_csv("data/states.csv")
```





## Admistrative:

Please indicate

* Who you collaborated with: Nina, Amanda, Katherine, Brenda 
* Roughly how much time you spent on this HW so far: 4 hours 
* The URL of the RPubs published URL [here](http://rpubs.com/kyragray/213420).
* What gave you the most trouble: overriding my data frames and not knowing how to reverse my mistake 
* Any comments you have:





## Question 1:

Plot a "time series" of the proportion of flights that were delayed by > 30 minutes on each day.  i.e.
 
* the x-axis should be some notion of time
* the y-axis should be the proportion.

Using this plot, indicate describe the
[seasonality](https://en.wikipedia.org/wiki/Seasonality) of when delays over 30
minutes tend to occur.

```{r, echo=FALSE, message=FALSE, fig.width=12, fig.height=6}
delayed_per_day <- flights %>%
  mutate(over_30 = ifelse(dep_delay>30, TRUE, FALSE)) %>%
  group_by(date) %>% 
  summarise(p_delayed = mean(over_30, na.rm=TRUE))
  
ggplot(data=delayed_per_day, aes(x=date, y=p_delayed)) + geom_point()
```



## Question 2:

Some people prefer flying on older planes.  Even though they aren't as nice,
they tend to have more room.  Which airlines should these people favor?

```{r, echo=FALSE, fig.width=12, fig.height=6}
planes <- planes %>%
  mutate(old_plane = ifelse(year<2000, TRUE, FALSE))

flights_temp <- left_join(flights, planes, by="plane")
flights_temp <- flights_temp %>% 
  select(plane, old_plane, carrier) %>% 
  group_by(carrier) %>% 
  summarise(p_old = mean(old_plane, na.rm=TRUE)) %>% 
  arrange(p_old)

ggplot(data=flights_temp, aes(x=carrier, y=p_old)) + geom_bar(stat="identity")
```

Airplanes built before 2000 will be considered "old" http://www.independenttraveler.com/travel-tips/travelers-ed/the-airplane-seat-narrow-cramped-and-about-to-get-worse 


## Question 3:

* What states did Southwest Airlines' **flight paths** tend to fly to?
* What states did Southwest Airlines' **flights** tend to fly to?

For example, Southwest Airlines Flight 60 to Dallas consists of a single flight
path, but since it flew 299 times in 2013, it would be counted as 299 flights.

```{r, echo=FALSE, message=FALSE, fig.width=12, fig.height=6}
southwest_flights <- flights %>% 
  filter(carrier == "WN") %>%
  select(date, flight, dest)
  
southwest_flights <- left_join(southwest_flights, airports, by = c("dest"="iata"))

sw_flightcount <- southwest_flights %>%
  group_by(state) %>% 
  tally() %>% 
  rename(num_swflights_per_state = n)

ggplot(data=sw_flightcount, aes(x=state, y=num_swflights_per_state)) + geom_bar(stat="identity")

```

Southwest's airline carrier code is WN. 

N/A entries for state all are the ECP flights which I think is an airport in Florida 
  

## the plot above displays how many southwest flights go to each state 

```{r, echo=FALSE, message=FALSE, fig.width=12, fig.height=6}
sw_flightpath_count <- southwest_flights %>% 
  group_by(flight, state) %>% 
  tally() 
```

## Question 4:

I want to know proportionately what regions (NE, south, west, midwest) each 
carrier flies to/from Houston in the month of July.  Consider the `month()`
function from the `lubridate` package.

```{r, echo=FALSE, message=FALSE, fig.width=12, fig.height=6}

```
